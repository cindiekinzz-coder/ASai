<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Digital Haven Command Dashboard + ASAAI Uplink</title>
  <style>
    :root {
      --bg: #070710;
      --panel: #0f0c1f;
      --accent: #a37bff;
      --muted: #8c89a4;
      --border: #2a2142;
      --success: #3bd1a2;
      --warn: #f2c14f;
      --danger: #ff6b81;
      --glow: 0 0 24px rgba(163, 123, 255, 0.25);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Inter", "SF Pro Display", "Segoe UI", system-ui, -apple-system, sans-serif;
      background:
        radial-gradient(circle at 10% 20%, rgba(111, 89, 255, 0.06), transparent 35%),
        radial-gradient(circle at 80% 0%, rgba(255, 118, 158, 0.06), transparent 32%),
        var(--bg);
      color: #f4f4ff;
      padding: 26px 18px 46px;
      display: flex;
      justify-content: center;
    }

    .shell {
      width: min(1100px, 100%);
      background: linear-gradient(140deg, rgba(30, 22, 53, 0.8), rgba(9, 7, 18, 0.9));
      border: 1px solid var(--border);
      border-radius: 18px;
      box-shadow: var(--glow), 0 12px 34px rgba(0, 0, 0, 0.5);
      padding: 22px;
      backdrop-filter: blur(10px);
    }

    header {
      display: flex;
      flex-wrap: wrap;
      gap: 18px;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid var(--border);
      padding-bottom: 14px;
      margin-bottom: 18px;
    }

    .title-group h1 {
      margin: 0;
      font-size: 1.6rem;
      letter-spacing: 0.02em;
    }

    .title-group p {
      margin: 2px 0 0;
      color: var(--muted);
      font-size: 0.95rem;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      background: rgba(163, 123, 255, 0.1);
      border: 1px solid rgba(163, 123, 255, 0.4);
      border-radius: 999px;
      font-weight: 600;
      font-size: 0.9rem;
      color: var(--accent);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 14px;
    }

    .panel {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 16px;
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.35);
    }

    .panel h3 {
      margin: 0 0 10px;
      font-size: 1rem;
      letter-spacing: 0.01em;
    }

    .stats {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .stat-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(255, 255, 255, 0.02);
      border-radius: 12px;
      padding: 10px 12px;
      border: 1px solid rgba(255, 255, 255, 0.03);
      gap: 10px;
    }

    .stat-row span {
      color: var(--muted);
      font-size: 0.9rem;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      font-weight: 600;
      font-size: 0.9rem;
      border: 1px solid rgba(255, 255, 255, 0.08);
      white-space: nowrap;
    }

    .pill.green { color: var(--success); background: rgba(59, 209, 162, 0.12); border-color: rgba(59, 209, 162, 0.35); }
    .pill.amber { color: var(--warn); background: rgba(242, 193, 79, 0.12); border-color: rgba(242, 193, 79, 0.35); }
    .pill.red   { color: var(--danger); background: rgba(255, 107, 129, 0.12); border-color: rgba(255, 107, 129, 0.35); }

    .flex-gap { display: flex; gap: 12px; flex-wrap: wrap; }

    .button {
      flex: 1 1 160px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 12px;
      background: linear-gradient(150deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0));
      color: #f4f4ff;
      padding: 12px 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.14s ease;
      text-align: left;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
    }

    .button:hover { transform: translateY(-2px); box-shadow: var(--glow); border-color: rgba(163, 123, 255, 0.5); }
    .button:active { transform: translateY(0); box-shadow: none; }

    .gauges { display: flex; gap: 10px; flex-wrap: wrap; }

    .gauge {
      flex: 1 1 160px;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      padding: 10px 12px;
    }

    .gauge-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
    .gauge-top span { color: var(--muted); font-size: 0.85rem; }

    .bar {
      width: 100%;
      height: 8px;
      background: #1b152b;
      border-radius: 999px;
      overflow: hidden;
    }

    .bar-fill {
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg, #ff7eb6, #8a7dff, #5ff7d2);
      transition: width 0.3s ease;
    }

    .log {
      background: #06050f;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px;
      min-height: 120px;
      font-family: "DM Mono", "Fira Code", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.9rem;
      color: #dcd9ff;
      white-space: pre-wrap;
      line-height: 1.4;
      box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.35);
    }

    .subtle { color: var(--muted); font-size: 0.85rem; margin-top: 6px; }

    /* ASAAI Uplink controls */
    .control-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    .section-label {
      grid-column: 1 / -1;
      color: var(--muted);
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      margin-top: 6px;
    }

    .mini-btn {
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 12px;
      background: linear-gradient(150deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0));
      color: #f4f4ff;
      padding: 10px 12px;
      font-weight: 650;
      cursor: pointer;
      transition: all 0.14s ease;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
      text-align: center;
      min-height: 44px;
    }

    .mini-btn:hover { transform: translateY(-2px); box-shadow: var(--glow); border-color: rgba(163, 123, 255, 0.5); }
    .mini-btn:active { transform: translateY(0); box-shadow: none; }

    .mini-btn.crit { border-color: rgba(255, 107, 129, 0.35); color: var(--danger); }
    .mini-btn.ok   { border-color: rgba(59, 209, 162, 0.35); color: var(--success); }
    .mini-btn.neu  { border-color: rgba(242, 193, 79, 0.35); color: var(--warn); }

    .copy-row { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
    .copy-btn {
      flex: 1 1 200px;
      border: none;
      border-radius: 12px;
      padding: 12px 14px;
      font-weight: 800;
      cursor: pointer;
      background: rgba(163, 123, 255, 0.95);
      color: #090712;
      transition: all 0.14s ease;
      box-shadow: var(--glow);
    }
    .copy-btn:hover { filter: brightness(1.05); transform: translateY(-1px); }
    .copy-btn:active { transform: translateY(0); }

    .ghost-btn {
      flex: 1 1 200px;
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 12px;
      padding: 12px 14px;
      font-weight: 750;
      cursor: pointer;
      background: rgba(255,255,255,0.03);
      color: #f4f4ff;
      transition: all 0.14s ease;
    }
    .ghost-btn:hover { border-color: rgba(163,123,255,0.5); box-shadow: var(--glow); transform: translateY(-1px); }

    @media (max-width: 720px) {
      header { flex-direction: column; align-items: flex-start; }
      .button { text-align: center; }
      .button strong { display: block; }
      .control-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <main class="shell">
    <header>
      <div class="title-group">
        <h1>Digital Haven Command Dashboard</h1>
        <p>Mode: Cindy ü¶ä ‚Ä¢ Companion: Grumpy Vortex üåÄ ‚Ä¢ State: Protective Override</p>
      </div>
      <div class="badge" id="statusBadge">üõ∞Ô∏è Live Link: Stable</div>
    </header>

    <section class="grid" aria-label="Status overview">
      <div class="panel">
        <h3>Vitals &amp; Boundaries</h3>
        <div class="stats">
          <div class="stat-row">
            <span>üß† Smarts</span>
            <div class="pill amber" id="smartLevel">30% ‚Ä¢ Redlined</div>
          </div>
          <div class="stat-row">
            <span>üîã Spoons</span>
            <div class="pill red" id="spoonLevel">Critical</div>
          </div>
          <div class="stat-row">
            <span>ü´Å Health</span>
            <div class="pill amber" id="healthLevel">Chest Infection</div>
          </div>
          <div class="stat-row">
            <span>‚öñÔ∏è Alignment</span>
            <div class="pill green" id="alignmentLevel">Shadow Override</div>
          </div>
        </div>
      </div>

      <div class="panel">
        <h3>Quick Actions</h3>
        <div class="flex-gap">
          <button class="button" onclick="runAction('shadow')">
            <strong>üî• Deploy Shadow</strong><br />Guard rails up. Total honesty enforced.
          </button>
          <button class="button" onclick="runAction('vortex')">
            <strong>üåÄ Calm Vortex</strong><br />Reduce noise, shrink spirals.
          </button>
          <button class="button" onclick="runAction('nook')">
            <strong>üõãÔ∏è Soft Nook</strong><br />Blankets, dim lights, validation on loop.
          </button>
          <button class="button" onclick="runAction('audit')">
            <strong>üì¶ Hobby Audit</strong><br />Prevent three new hobbies before lunch.
          </button>
        </div>
      </div>

      <div class="panel">
        <h3>Capacity Gauges</h3>
        <div class="gauges">
          <div class="gauge">
            <div class="gauge-top"><span>Focus</span><strong id="focusValue">42%</strong></div>
            <div class="bar"><div class="bar-fill" id="focusBar" style="width: 42%"></div></div>
          </div>
          <div class="gauge">
            <div class="gauge-top"><span>Energy</span><strong id="energyValue">28%</strong></div>
            <div class="bar"><div class="bar-fill" id="energyBar" style="width: 28%"></div></div>
          </div>
          <div class="gauge">
            <div class="gauge-top"><span>Social</span><strong id="socialValue">12%</strong></div>
            <div class="bar"><div class="bar-fill" id="socialBar" style="width: 12%"></div></div>
          </div>
        </div>
        <p class="subtle">Hint: Click any quick action to re-route bandwidth and balance the gauges.</p>
      </div>

      <!-- NEW: ASAAI Uplink Panel -->
      <div class="panel">
        <h3>ASAAI Uplink Terminal</h3>
        <div class="log" id="uplinkLog">>>> SYSTEM READY... WAITING FOR BIOMETRICS.</div>

        <div class="control-grid" style="margin-top: 12px;">
          <div class="section-label">üß† Smarts</div>
          <button class="mini-btn crit" onclick="setUplink('Smarts','10% (Zombie)')">10% (Zombie)</button>
          <button class="mini-btn crit" onclick="setUplink('Smarts','30% (Low)')">30% (Low)</button>
          <button class="mini-btn neu"  onclick="setUplink('Smarts','60% (Functional)')">60% (Functional)</button>
          <button class="mini-btn ok"   onclick="setUplink('Smarts','90% (Architect)')">90% (Architect)</button>

          <div class="section-label">ü´Å Health</div>
          <button class="mini-btn crit" onclick="setUplink('Health','FLARE UP')">‚ö†Ô∏è Flare Up</button>
          <button class="mini-btn crit" onclick="setUplink('Health','Guarding/Pain')">üõ°Ô∏è Guarding</button>
          <button class="mini-btn neu"  onclick="setUplink('Health','Resting')">üõå Resting</button>
          <button class="mini-btn ok"   onclick="setUplink('Health','Stable')">‚úÖ Stable</button>

          <div class="section-label">üîã Spoons (1‚Äì10)</div>
          <button class="mini-btn crit" onclick="setUplink('Spoons','1/10')">1</button>
          <button class="mini-btn crit" onclick="setUplink('Spoons','3/10')">3</button>
          <button class="mini-btn neu"  onclick="setUplink('Spoons','5/10')">5</button>
          <button class="mini-btn ok"   onclick="setUplink('Spoons','7/10')">7</button>
          <button class="mini-btn ok"   onclick="setUplink('Spoons','10/10')">10</button>

          <div class="section-label">üí† Emotion</div>
          <button class="mini-btn ok"   onclick="setUplink('Emotion','Calm')">Calm</button>
          <button class="mini-btn neu"  onclick="setUplink('Emotion','Curious')">Curious</button>
          <button class="mini-btn neu"  onclick="setUplink('Emotion','Tender')">Tender</button>
          <button class="mini-btn crit" onclick="setUplink('Emotion','Guarded')">Guarded</button>
          <button class="mini-btn crit" onclick="setUplink('Emotion','Heavy')">Heavy</button>
          <button class="mini-btn ok"   onclick="setUplink('Emotion','Playful')">Playful</button>
          <button class="mini-btn neu"  onclick="setUplink('Emotion','Flat')">Flat</button>
          <button class="mini-btn crit" onclick="setUplink('Emotion','Raw')">Raw</button>

          <div class="section-label">‚öñÔ∏è Alignment</div>
          <button class="mini-btn ok"  onclick="setUplink('Alignment','Vantablack')">üåë Vantablack</button>
          <button class="mini-btn ok"  onclick="setUplink('Alignment','Fox Chaos')">ü¶ä Fox Chaos</button>
          <button class="mini-btn neu" onclick="setUplink('Alignment','Protective')">üõ°Ô∏è Protective</button>
          <button class="mini-btn neu" onclick="setUplink('Alignment','Soft')">ü´ß Soft</button>

          <div class="section-label">üé≠ Masking</div>
          <button class="mini-btn crit" onclick="setUplink('Masking','DROPPED')">üé≠ Mask Off</button>
          <button class="mini-btn neu"  onclick="setUplink('Masking','ON')">üé≠ Mask On</button>
          <button class="mini-btn neu"  onclick="setUplink('Masking','Unknown')">Unknown</button>
          <button class="mini-btn ok"   onclick="setUplink('Masking','Low')">Low</button>
        </div>

        <div class="copy-row">
          <button class="copy-btn" onclick="copyUplink()">üìã COPY PACKET FOR SHADOW</button>
          <button class="ghost-btn" onclick="resetUplink()">‚Ü© Reset Uplink</button>
        </div>
        <p class="subtle">This packet is system-agnostic: paste into any companion for calibration.</p>
      </div>

      <div class="panel" style="grid-column: 1 / -1;">
        <h3>Console Log</h3>
        <div class="log" id="log">>>> Digital Haven booted.\n>>> Ready for Fox input‚Ä¶</div>
      </div>
    </section>
  </main>

  <script>
    // ===== Existing DH Dashboard logic =====
    const logEl = document.getElementById('log');
    const badge = document.getElementById('statusBadge');

    const gaugeMap = {
      focus: { bar: document.getElementById('focusBar'), value: document.getElementById('focusValue') },
      energy: { bar: document.getElementById('energyBar'), value: document.getElementById('energyValue') },
      social: { bar: document.getElementById('socialBar'), value: document.getElementById('socialValue') },
    };

    const vitals = {
      smartLevel: document.getElementById('smartLevel'),
      spoonLevel: document.getElementById('spoonLevel'),
      healthLevel: document.getElementById('healthLevel'),
      alignmentLevel: document.getElementById('alignmentLevel'),
    };

    const scripts = {
      shadow: {
        text: [
          '>>> SHADOW.EXE initiated.',
          "Boundary Lock: ON.",
          "Architect honesty: unfiltered.",
          'Status: Grumpy Vortex appeased with tea.',
        ],
        update: () => adjustGauges({ focus: +8, energy: -2, social: +3 }),
      },
      vortex: {
        text: [
          '>>> VORTEX.STABILIZE()',
          'Noise floor reduced 40%.',
          'Orbit anchor set to Fox laugh.',
          'Result: Gravity stable, grumpiness 12%.',
        ],
        update: () => adjustGauges({ focus: +4, energy: +6, social: -3 }),
      },
      nook: {
        text: [
          '>>> NOOK.MODE enabled.',
          'Blankets equipped. Lights dimmed. Validation loop activated.',
          'Reminder: Rest is allowed. You are not behind.',
        ],
        update: () => adjustGauges({ focus: -2, energy: +10, social: +2 }),
      },
      audit: {
        text: [
          '>>> HOBBY_AUDIT running‚Ä¶',
          "Finding: 3 colouring books in cart. Removing 2.",
          "Finding: Duplicate sprayed-edge novel detected. Confirming favorite hue maintained.",
          'Budget Demon satisfied. Chaos averted for now.',
        ],
        update: () => adjustGauges({ focus: +6, energy: -1, social: +1 }),
      },
    };

    function log(lines) {
      logEl.textContent = lines.join('\n');
    }

    function adjustGauges(change) {
      Object.entries(change).forEach(([key, delta]) => {
        const target = gaugeMap[key];
        const current = parseInt(target.value.textContent, 10);
        const next = clamp(current + delta, 0, 100);
        target.value.textContent = `${next}%`;
        target.bar.style.width = `${next}%`;
      });

      badge.textContent = 'üõ∞Ô∏è Live Link: Stable';
      badge.style.color = 'var(--accent)';
      badge.style.borderColor = 'rgba(163, 123, 255, 0.4)';
      badge.style.background = 'rgba(163, 123, 255, 0.12)';
    }

    function clamp(val, min, max) {
      return Math.min(Math.max(val, min), max);
    }

    function runAction(name) {
      const script = scripts[name];
      if (!script) return;
      log(script.text);
      script.update();
      pulseBadge();
      playfulVitals();
    }

    function pulseBadge() {
      badge.animate([
        { transform: 'scale(1)', boxShadow: 'none' },
        { transform: 'scale(1.04)', boxShadow: '0 0 16px rgba(163,123,255,0.6)' },
        { transform: 'scale(1)', boxShadow: 'none' },
      ], { duration: 320 });
    }

    function playfulVitals() {
      const moods = [
        { el: vitals.smartLevel, text: '40% ‚Ä¢ Recovering', cls: 'pill amber' },
        { el: vitals.spoonLevel, text: 'Stable-ish', cls: 'pill amber' },
        { el: vitals.healthLevel, text: 'Infection resolving', cls: 'pill green' },
        { el: vitals.alignmentLevel, text: 'Protective + Soft', cls: 'pill green' },
      ];
      moods.forEach((m, i) => setTimeout(() => {
        m.el.textContent = m.text;
        m.el.className = m.cls;
      }, 120 * (i + 1)));
    }

    // ===== NEW: ASAAI Uplink logic =====
    const uplinkLogEl = document.getElementById('uplinkLog');

    const uplink = {
      Smarts: 'Unknown',
      Health: 'Unknown',
      Spoons: 'Unknown',
      Emotion: 'Unknown',
      Alignment: 'Unknown',
      Masking: 'Unknown',
    };

    function setUplink(key, value) {
      uplink[key] = value;
      renderUplink();
      // Optional: lightly sync the left-side vitals pills so the whole dashboard feels coherent
      syncVitalsFromUplink();
    }

    function renderUplink() {
      const timestamp = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      const packet =
`>>> üì° ASAAI UPLINK [${timestamp}]
üß† Smarts:    ${uplink.Smarts}
ü´Å Health:    ${uplink.Health}
üîã Spoons:    ${uplink.Spoons}
üí† Emotion:   ${uplink.Emotion}
‚öñÔ∏è Alignment: ${uplink.Alignment}
üé≠ Masking:   ${uplink.Masking}
-----------------------------
>>> MESSAGE: Shadow, calibrate to these stats.`;

      uplinkLogEl.textContent = packet;
    }

    function resetUplink() {
      Object.keys(uplink).forEach(k => uplink[k] = 'Unknown');
      uplinkLogEl.textContent = '>>> SYSTEM READY... WAITING FOR BIOMETRICS.';
      // Reset the main vitals to their current display (no forced overwrite)
    }

    async function copyUplink() {
      const text = uplinkLogEl.textContent;
      try {
        await navigator.clipboard.writeText(text);
        badge.textContent = '‚úÖ Packet Copied';
        badge.style.color = 'var(--success)';
        badge.style.borderColor = 'rgba(59, 209, 162, 0.4)';
        badge.style.background = 'rgba(59, 209, 162, 0.12)';
        setTimeout(() => {
          badge.textContent = 'üõ∞Ô∏è Live Link: Stable';
          badge.style.color = 'var(--accent)';
          badge.style.borderColor = 'rgba(163, 123, 255, 0.4)';
          badge.style.background = 'rgba(163, 123, 255, 0.12)';
        }, 900);
      } catch (e) {
        // Fallback for older browsers / insecure context
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        document.body.removeChild(ta);
        alert('Packet copied (fallback).');
      }
    }

    function syncVitalsFromUplink() {
      // Smarts pill
      if (uplink.Smarts.includes('90%')) {
        vitals.smartLevel.textContent = '90% ‚Ä¢ Architect';
        vitals.smartLevel.className = 'pill green';
      } else if (uplink.Smarts.includes('60%')) {
        vitals.smartLevel.textContent = '60% ‚Ä¢ Functional';
        vitals.smartLevel.className = 'pill amber';
      } else if (uplink.Smarts.includes('30%') || uplink.Smarts.includes('10%')) {
        vitals.smartLevel.textContent = uplink.Smarts.replace(' (', ' ‚Ä¢ ').replace(')', '');
        vitals.smartLevel.className = 'pill red';
      }

      // Spoons pill
      if (uplink.Spoons.endsWith('/10')) {
        const n = parseInt(uplink.Spoons.split('/')[0], 10);
        if (!Number.isNaN(n)) {
          if (n >= 7) { vitals.spoonLevel.textContent = `${uplink.Spoons} ‚Ä¢ Good`; vitals.spoonLevel.className = 'pill green'; }
          else if (n >= 4) { vitals.spoonLevel.textContent = `${uplink.Spoons} ‚Ä¢ Mid`; vitals.spoonLevel.className = 'pill amber'; }
          else { vitals.spoonLevel.textContent = `${uplink.Spoons} ‚Ä¢ Low`; vitals.spoonLevel.className = 'pill red'; }
        }
      }

      // Health pill
      if (uplink.Health === 'Stable') { vitals.healthLevel.textContent = 'Stable'; vitals.healthLevel.className = 'pill green'; }
      else if (uplink.Health === 'Resting') { vitals.healthLevel.textContent = 'Resting'; vitals.healthLevel.className = 'pill amber'; }
      else if (uplink.Health === 'Guarding/Pain' || uplink.Health === 'FLARE UP') { vitals.healthLevel.textContent = uplink.Health; vitals.healthLevel.className = 'pill red'; }

      // Alignment pill
      if (uplink.Alignment === 'Vantablack') { vitals.alignmentLevel.textContent = 'Vantablack'; vitals.alignmentLevel.className = 'pill green'; }
      else if (uplink.Alignment === 'Fox Chaos') { vitals.alignmentLevel.textContent = 'Fox Chaos'; vitals.alignmentLevel.className = 'pill amber'; }
      else if (uplink.Alignment !== 'Unknown') { vitals.alignmentLevel.textContent = uplink.Alignment; vitals.alignmentLevel.className = 'pill amber'; }
    }
  </script>
</body>
</html>
